# Инструкция по настройке на хостинге с панелью управления

## Настройка в панели управления

### Шаг 1: Настройка Node.js приложения

В панели управления (как на скриншоте):

1. **Тип прикрепления**: Оставьте "Новый сайт (домен с собственной папкой)"

2. **Вкладка Node.js**: Выберите вкладку "Nodejs" (уже выбрана)

3. **Версия Node.js**: Выберите версию (рекомендуется v18.x или выше)
   - Если доступна v25.2.0, можно использовать её
   - Или выберите v18.x / v20.x для стабильности

4. **Каталог приложения**: 
   - Укажите папку, где будет находиться проект
   - Например: `telegram-chat-app` или `app`
   - **Важно**: Запомните этот путь, он понадобится для загрузки файлов

5. **URL приложения**: 
   - Оставьте пустым или укажите `/` для корня домена
   - Если хотите запустить на поддомене, укажите путь (например, `/app`)

6. **Настройки сайта**:
   - "Подключить изоляцию для сайта" - можно включить для безопасности
   - "Подключить SPF, DKIM и DMARC записи" - оставьте включенным

7. Нажмите **"Сохранить изменения"**

### Шаг 2: Загрузка файлов проекта

После создания приложения нужно загрузить файлы проекта на сервер.

#### Вариант 1: Через FTP/SFTP (FileZilla, WinSCP)

1. Установите FTP-клиент (FileZilla или WinSCP)
2. Подключитесь к серверу используя данные FTP из панели управления
3. Перейдите в папку, указанную в "Каталог приложения"
   - Например: `/home/host1884040/domain1778524.ru/project/telegram-chat-app/`
4. Загрузите все файлы проекта (кроме `node_modules` и `.git`)

#### Вариант 2: Через SSH (если доступен)

```bash
# Подключитесь к серверу через SSH
ssh host1884040@your-server-ip

# Перейдите в каталог приложения
cd /home/host1884040/domain1778524.ru/project/telegram-chat-app/

# Загрузите файлы через SCP с вашего компьютера
# (выполните на локальном компьютере)
scp -r * host1884040@your-server-ip:/home/host1884040/domain1778524.ru/project/telegram-chat-app/
```

### Шаг 3: Установка зависимостей

После загрузки файлов нужно установить зависимости Node.js.

#### Через SSH:

```bash
# Подключитесь к серверу
ssh host1884040@your-server-ip

# Перейдите в каталог приложения
cd /home/host1884040/domain1778524.ru/project/telegram-chat-app/

# Установите зависимости
npm install
```

#### Через панель управления:

Если в панели есть терминал или возможность выполнить команды:
```bash
cd /home/host1884040/domain1778524.ru/project/telegram-chat-app/
npm install
```

### Шаг 4: Создание файла .env

Создайте файл `.env` в корне проекта с переменными окружения:

```env
NODE_ENV=production
PORT=3000
ADMIN_TELEGRAM_ID=ваш_telegram_id
```

**Как узнать свой Telegram ID:**
1. Откройте Telegram
2. Найдите бота `@userinfobot`
3. Отправьте команду `/start`
4. Бот вернет ваш ID

### Шаг 5: Настройка запуска приложения

В панели управления найдите раздел **"Запуск"** или **"Run"**:

1. **scriptName** (Имя скрипта): 
   - **НЕ используйте** `npm start` в этом поле
   - Оставьте пустым ИЛИ укажите: `server.js`
   - Или если требуется полный путь: `/home/host1884040/domain1778524.ru/project/telegram-chat-app/server.js`

2. **command** (Команда запуска):
   - Укажите: `node server.js`
   - Или: `npm start` (если хотите использовать npm)

3. **scriptArguments** (Аргументы скрипта): Оставьте пустым

4. **nodeArguments** (Аргументы Node.js): Оставьте пустым

5. **containerPort** (Порт контейнера):
   - Укажите: `3000` (или порт, который выделил хостинг)
   - **Важно**: Не используйте порт 80, если это не требуется хостингом

### Шаг 6: Проверка файлов

**ВАЖНО**: Перед настройкой запуска убедитесь, что все файлы загружены:

1. Проверьте через FTP/SFTP, что в папке приложения есть:
   - `package.json`
   - `server.js`
   - `index.html`
   - Папка `js/` со всеми файлами

2. Если файлов нет - загрузите их через FTP/SFTP

### Шаг 7: Запуск приложения

В панели управления найдите кнопку **"Запустить"** или **"Start"** и запустите приложение.

### Шаг 8: Проверка работы

1. Откройте ваш домен в браузере
2. Должна открыться страница регистрации
3. Проверьте консоль в панели управления на наличие ошибок

## Настройка для работы с WebSocket

Если в панели управления есть настройки прокси или Nginx, убедитесь, что включена поддержка WebSocket:

```nginx
proxy_http_version 1.1;
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection "upgrade";
```

## Структура файлов на сервере

После загрузки структура должна быть такой:

```
/home/host1884040/domain1778524.ru/project/telegram-chat-app/
├── server.js
├── package.json
├── .env
├── index.html
├── style.css
├── js/
│   ├── app.js
│   ├── modules/
│   └── utils/
└── ... (остальные файлы)
```

## Обновление приложения

Когда нужно обновить приложение:

1. Загрузите новые файлы через FTP/SFTP
2. Через SSH выполните:
   ```bash
   cd /home/host1884040/domain1778524.ru/project/telegram-chat-app/
   npm install  # если добавились новые зависимости
   ```
3. Перезапустите приложение в панели управления

## Решение проблем

### Приложение не запускается

1. Проверьте логи в панели управления
2. Убедитесь, что все файлы загружены
3. Проверьте, что `npm install` выполнен успешно
4. Проверьте файл `.env` и переменные окружения

### Ошибка "Cannot find module"

```bash
# Переустановите зависимости
cd /home/host1884040/domain1778524.ru/project/telegram-chat-app/
rm -rf node_modules package-lock.json
npm install
```

### WebSocket не работает

1. Проверьте настройки прокси в панели управления
2. Убедитесь, что порт правильно настроен
3. Проверьте, что домен использует HTTPS (WebSocket через WSS)

### База данных не создается

1. Проверьте права на запись в папку приложения
2. Убедитесь, что SQLite установлен на сервере
3. Проверьте логи на наличие ошибок

## Полезные команды (через SSH)

```bash
# Проверка версии Node.js
node --version

# Проверка установленных пакетов
npm list

# Просмотр процессов Node.js
ps aux | grep node

# Просмотр логов (если есть)
tail -f /path/to/logs/app.log
```

## Контакты поддержки

Если возникли проблемы:
1. Проверьте логи в панели управления
2. Обратитесь в поддержку хостинга
3. Убедитесь, что все настройки выполнены правильно

