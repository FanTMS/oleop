# Конфигурация для Amvera
# Документация: https://docs.amvera.io

# Версия конфигурации
version: 1

# Версия Node.js
runtime:
  version: 20

# Настройки сборки
build:
  # Команда сборки (установка зависимостей)
  commands:
    - npm ci --production=false
    - npm rebuild sqlite3 --build-from-source

# Настройки запуска
run:
  # Имя скрипта из package.json
  scriptName: start
  
  # Команда запуска приложения
  command: npm start
  
  # Порт контейнера
  containerPort: 3000
  
  # Монтирование для персистентных данных (база данных)
  persistenceMount: /data

# Переменные окружения (можно также настроить в панели управления)
env:
  NODE_ENV: production
  PORT: 3000

# Исключения из архива (не загружаются на сервер)
exclude:
  - node_modules
  - .git
  - .gitignore
  - *.log
  - .env.local
  - .env
  - .history
  - *.bat
  - *.sh
  - oleop
  - .vscode
  - .idea
  - *.md
  - railway.json
  - render.yaml

